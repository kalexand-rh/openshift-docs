// Module included in the following assemblies:
//
// * scalability_and_performance/using-argocd.adoc

[id="argocd-builds-sample_{context}"]
= Builds

You can use ArgoCD to deploy a global Build configuration. The `./builds/base` directory in the ArgoCD samples repository contains an example global Build configuration that is launched by using a link:https://kustomize.io/[Kustomize] application.

.ArgoCD Build configuration sample (`build.yaml`)
----
---
apiVersion: config.openshift.io/v1
kind: Build
metadata:
  name: cluster
  annotations:
    argocd.argoproj.io/sync-options: Prune=false
spec:
  buildDefaults:
    defaultProxy:
      httpProxy: http://proxy.com
      httpsProxy: https://proxy.com
      noProxy: internal.com
    env:
    - name: envkey
      value: envvalue
    gitProxy:
      httpProxy: http://gitproxy.com
      httpsProxy: https://gitproxy.com
      noProxy: internalgit.com
    imageLabels:
    - name: labelkey
      value: labelvalue
    resources:
      limits:
        cpu: 100m
        memory: 50Mi
      requests:
        cpu: 10m
        memory: 10Mi
  buildOverrides:
    imageLabels:
    - name: labelkey
      value: labelvalue
    nodeSelector:
      selectorkey: selectorvalue
    tolerations:
    - effect: NoSchedule
      key: node-role.kubernetes.io/builds
----

.Kustomize definition for the Build application (`kustomization.yaml`)
----
resources:
- build.yaml
----

.Procedure

. Create the `builds-config` application in ArgoCD:
+
----
$ argocd app create builds-config --repo https://github.com/<account_name>/openshift4-gitops.git --path=builds/base --dest-server=https://kubernetes.default.svc --dest-namespace=openshift-config <1>
$ argocd app sync builds-config
----
<1> `<account_name>` is the name of the GitHub account or organization that you cloned the repository to.
