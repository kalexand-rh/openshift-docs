// Module included in the following assemblies:
//
// * scalability_and_performance/using-argocd.adoc

[id="argocd-scheduler-policy-sample_{context}"]
= Scheduler policy

You can use ArgoCD to deploy a custom scheduler policy. The `./scheduler` directory contains an example scheduler policy ConfigMap that you can deploy to override the default scheduler policy.

.ArgoCD scheduler policy configuration sample (`scheduler-config.yaml`)
----
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: policy-configmap
  namespace: openshift-kube-scheduler
data:
  policy.cfg: |
    {
        "kind" : "Policy",
        "apiVersion" : "v1",
        "predicates" : [
                {"name" : "MaxGCEPDVolumeCount"},
                {"name" : "GeneralPredicates"},
                {"name" : "MaxAzureDiskVolumeCount"},
                {"name" : "MaxCSIVolumeCountPred"},
                {"name" : "CheckVolumeBinding"},
                {"name" : "MaxEBSVolumeCount"},
                {"name" : "PodFitsResources"},
                {"name" : "MatchInterPodAffinity"},
                {"name" : "CheckNodeUnschedulable"},
                {"name" : "NoDiskConflict"},
                {"name" : "NoVolumeZoneConflict"},
                {"name" : "MatchNodeSelector"},
                {"name" : "HostName"},
                {"name" : "PodToleratesNodeTaints"}
                ],
        "priorities" : [
                {"name" : "LeastRequestedPriority", "weight" : 1},
                {"name" : "BalancedResourceAllocation", "weight" : 1},
                {"name" : "ServiceSpreadingPriority", "weight" : 1},
                {"name" : "NodePreferAvoidPodsPriority", "weight" : 1},
                {"name" : "NodeAffinityPriority", "weight" : 1},
                {"name" : "TaintTolerationPriority", "weight" : 1},
                {"name" : "ImageLocalityPriority", "weight" : 1},
                {"name" : "SelectorSpreadPriority", "weight" : 1},
                {"name" : "InterPodAffinityPriority", "weight" : 1},
                {"name" : "EqualPriority", "weight" : 1}
                ]
    }
----

.Procedure

. Create the `scheduler-policy` application in ArgoCD:
+
----
$ argocd app create scheduler-policy --repo https://github.com/<account_name>/openshift4-gitops.git --path=scheduler --dest-server=https://kubernetes.default.svc --dest-namespace=openshift-kube-scheduler <<1>
$ argocd app sync scheduler-policy
----
<1> `<account_name>` is the name of the GitHub account or organization that you cloned the repository to.
